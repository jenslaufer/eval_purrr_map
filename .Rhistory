)) %>%
bind_rows(tibble(
group = "3",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
))
data %>%
group_by(group) %>%
nest() %>%
mutate(mdl = map(data, ~ loess(a ~ b, .)),
fitted = map(mdl, `[[`, "fitted")) %>%
select(-mdl) %>%
unnest()
knitr::opts_chunk$set(echo = TRUE)
set.seed(12L)
library(tidyverse)
c(1,2,3) %>% map(function(a) a^0.5)
c(1,2,3) %>% map(function(a) {a^0.5})
c(1,2,3) %>% map(sqrt)
tibble(a=c(4,3,5), b=c(8,9,5)) %>%  map(sqrt)
c(1,2,3) %>% map(~sqrt(.))
map2(c(1,3), c(4,8), function(a,b) a*b)
map2(c(1,3), c(4,8), ~(..1)*(..2))
c(1,3) %>% map2(c(4,8), ~(..1)*(..2))
list(list(5, 27, 50), list(1000, 1000, 1000)) %>%
pmap(function(a,b)a*b)
multiply <- function(a, b) {
a * b
}
list(list(5, 27, 50), list(1000, 1000, 1000)) %>%
pmap( ~ multiply(..1, ..2))
data <-  tibble(group = "1",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)) %>%
bind_rows(tibble(
group = "2",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
)) %>%
bind_rows(tibble(
group = "3",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
))
data %>%
group_by(group) %>%
nest() %>%
mutate(mdl = map(data, ~ loess(a ~ b, .)),
fitted = map(mdl, `[[`, "fitted")) %>%
select(-mdl) %>%
unnest()
data %>%
group_by(group) %>%
nest() %>%
mutate(mdl = map(data, ~ loess(a ~ b, .)),
fitted = map(mdl, augement)) %>%
select(-mdl) %>%
unnest()
data %>%
group_by(group) %>%
nest() %>%
mutate(mdl = map(data, ~ loess(a ~ b, .)),
fitted = map(mdl, augment)) %>%
select(-mdl) %>%
unnest()
library(tidyverse)
library(broom)
data %>%
group_by(group) %>%
nest() %>%
mutate(mdl = map(data, ~ loess(a ~ b, .)),
fitted = map(mdl, augment)) %>%
select(-mdl) %>%
unnest()
data %>%
group_by(group) %>%
nest() %>%
mutate(mdl = map(data, ~ loess(a ~ b, .)),
augmented = map(mdl, augment)) %>%
select(-mdl) %>%
unnest()
data %>%
group_by(group) %>%
nest() %>%
mutate(mdl = map(data, ~ loess(a ~ b, .)),
augmented = map(mdl, augment)) %>%
select(augmented) %>%
unnest()
data %>%
group_by(group) %>%
nest() %>%
mutate(mdl = map(data, ~ lm(a ~ b, .)),
augmented = map(mdl, augment)) %>%
select(augmented) %>%
unnest()
data %>%
group_by(group) %>%
nest() %>%
mutate(mdl = map(data, ~ lm(a ~ b, .)),
augmented = map(mdl, augment))
data %>%
group_by(group) %>%
nest() %>%
mutate(mdl = map(data, ~ lm(a ~ b, .)),
augmented = map(mdl, augment)) %>%
unnest(augmented)
data <-  tibble(group = "1",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)) %>%
bind_rows(tibble(
group = "2",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
)) %>%
bind_rows(tibble(
group = "3",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
))
data %>%
group_by(group) %>%
nest() %>%
mutate(mdl = map(data, ~ loess(a ~ b, .)),
fitted = map(mdl, `[[`, "fitted")) %>%
select(-mdl) %>%
unnest()
data <-  tibble(group = "1",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)) %>%
bind_rows(tibble(
group = "2",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
)) %>%
bind_rows(tibble(
group = "3",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
))
data %>%
group_by(group) %>%
nest() %>%
mutate(
loess = map(data, ~ loess(a ~ b, .)),
lm = map(data, ~ lm(a ~ b, .)),
loess_augmented = map(loess, augment),
lm_augmented = map(loess, augment)
)
data <- data %>%
group_by(group) %>%
nest() %>%
mutate(
loess = map(data, ~ loess(a ~ b, .)),
lm = map(data, ~ lm(a ~ b, .)),
loess_augmented = map(loess, augment),
lm_augmented = map(loess, augment)
)
knitr::opts_chunk$set(echo = TRUE)
set.seed(12L)
library(tidyverse)
library(broom)
c(1,2,3) %>% map(function(a) a^0.5)
c(1,2,3) %>% map(function(a) {a^0.5})
c(1,2,3) %>% map(sqrt)
tibble(a=c(4,3,5), b=c(8,9,5)) %>%  map(sqrt)
c(1,2,3) %>% map(~sqrt(.))
map2(c(1,3), c(4,8), function(a,b) a*b)
map2(c(1,3), c(4,8), ~(..1)*(..2))
c(1,3) %>% map2(c(4,8), ~(..1)*(..2))
list(list(5, 27, 50), list(1000, 1000, 1000)) %>%
pmap(function(a,b)a*b)
multiply <- function(a, b) {
a * b
}
list(list(5, 27, 50), list(1000, 1000, 1000)) %>%
pmap( ~ multiply(..1, ..2))
data <-  tibble(group = "1",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)) %>%
bind_rows(tibble(
group = "2",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
)) %>%
bind_rows(tibble(
group = "3",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
))
data <- data %>%
group_by(group) %>%
nest() %>%
mutate(
loess = map(data, ~ loess(a ~ b, .)),
lm = map(data, ~ lm(a ~ b, .)),
loess_augmented = map(loess, augment),
lm_augmented = map(loess, augment)
)
data %>%
select(loess_augmented) %>%
unnest() %>%
ggplot(aes(x=a)) %>%
geom_point(aes(y=b)) %>%
geom_line(aes(y=.fitted))
data %>%
select(loess_augmented) %>%
unnest() %>%
ggplot(aes(x=a)) +
geom_point(aes(y=b)) +
geom_line(aes(y=.fitted))
data %>%
select(loess_augmented) %>%
unnest() %>%
ggplot(aes(x=a)) +
geom_point(aes(y=b)) +
geom_line(aes(y=.fitted), color="blue")
data %>%
select(loess_augmented) %>%
unnest() %>%
plot_fit()
plot_fit <- function(data) {
data %>%
ggplot(aes(x = a)) +
geom_point(aes(y = b)) +
geom_line(aes(y = .fitted), color = "blue")
}
data %>%
select(loess_augmented) %>%
unnest() %>%
plot_fit()
data %>%
select(loess_augmented) %>%
unnest(loess_augmented) %>%
plot_fit()
data %>%
ungroup() %>%
select(loess_augmented) %>%
unnest() %>%
plot_fit()
data %>%
ungroup() %>%
select(loess_augmented) %>%
unnest(loess_augmented) %>%
plot_fit()
data %>%
select(str_detect("_augment"))
data %>%
select(colnnames(.), str_detect("_augment"))
data %>%
select(colnames(.), str_detect("_augment"))
data %>%
select(names(.), str_detect("_augment"))
data %>%
select(str_detect(names(.),, "_augment"))
data %>%
select(str_detect(names(.),"_augment"))
data %>%
select(ends_with("augment"))
data <- data %>%
group_by(group) %>%
nest() %>%
mutate(
loess = map(data, ~ loess(a ~ b, .)),
lm = map(data, ~ lm(a ~ b, .)),
loess_augmented = map(loess, augment),
lm_augmented = map(loess, augment)
) %>%
ungroup()
data <- data %>%
group_by(group) %>%
nest() %>%
mutate(
loess = map(data, ~ loess(a ~ b, .)),
lm = map(data, ~ lm(a ~ b, .)),
loess_augmented = map(loess, augment),
lm_augmented = map(loess, augment)
)
knitr::opts_chunk$set(echo = TRUE)
set.seed(12L)
library(tidyverse)
library(broom)
c(1,2,3) %>% map(function(a) a^0.5)
c(1,2,3) %>% map(function(a) {a^0.5})
c(1,2,3) %>% map(sqrt)
tibble(a=c(4,3,5), b=c(8,9,5)) %>%  map(sqrt)
c(1,2,3) %>% map(~sqrt(.))
map2(c(1,3), c(4,8), function(a,b) a*b)
map2(c(1,3), c(4,8), ~(..1)*(..2))
c(1,3) %>% map2(c(4,8), ~(..1)*(..2))
list(list(5, 27, 50), list(1000, 1000, 1000)) %>%
pmap(function(a,b)a*b)
multiply <- function(a, b) {
a * b
}
list(list(5, 27, 50), list(1000, 1000, 1000)) %>%
pmap( ~ multiply(..1, ..2))
data <-  tibble(group = "1",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)) %>%
bind_rows(tibble(
group = "2",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
)) %>%
bind_rows(tibble(
group = "3",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
))
data <- data %>%
group_by(group) %>%
nest() %>%
mutate(
loess = map(data, ~ loess(a ~ b, .)),
lm = map(data, ~ lm(a ~ b, .)),
loess_augmented = map(loess, augment),
lm_augmented = map(loess, augment)
)
data <- data %>%
group_by(group) %>%
nest() %>%
mutate(
loess = map(data, ~ loess(a ~ b, .)),
lm = map(data, ~ lm(a ~ b, .)),
loess_augmented = map(loess, augment),
lm_augmented = map(loess, augment)
) %>%
ung
knitr::opts_chunk$set(echo = TRUE)
set.seed(12L)
library(tidyverse)
library(broom)
c(1,2,3) %>% map(function(a) a^0.5)
c(1,2,3) %>% map(function(a) {a^0.5})
c(1,2,3) %>% map(sqrt)
tibble(a=c(4,3,5), b=c(8,9,5)) %>%  map(sqrt)
c(1,2,3) %>% map(~sqrt(.))
map2(c(1,3), c(4,8), function(a,b) a*b)
map2(c(1,3), c(4,8), ~(..1)*(..2))
c(1,3) %>% map2(c(4,8), ~(..1)*(..2))
list(list(5, 27, 50), list(1000, 1000, 1000)) %>%
pmap(function(a,b)a*b)
multiply <- function(a, b) {
a * b
}
list(list(5, 27, 50), list(1000, 1000, 1000)) %>%
pmap( ~ multiply(..1, ..2))
data <-  tibble(group = "1",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)) %>%
bind_rows(tibble(
group = "2",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
)) %>%
bind_rows(tibble(
group = "3",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
))
data <- data %>%
group_by(group) %>%
nest() %>%
mutate(
loess = map(data, ~ loess(a ~ b, .)),
lm = map(data, ~ lm(a ~ b, .)),
loess_augmented = map(loess, augment),
lm_augmented = map(loess, augment)
) %>%
ungroup()
plot_fit <- function(data) {
data %>%
ggplot(aes(x = a)) +
geom_point(aes(y = b)) +
geom_line(aes(y = .fitted), color = "blue")
}
data %>%
ungroup() %>%
select(loess_augmented) %>%
unnest(loess_augmented) %>%
plot_fit()
data %>%
select(loess_augmented) %>%
unnest(loess_augmented) %>%
plot_fit()
data %>%
select(ends_with("augment"))
data %>%
select(contains("augment"))
data %>%
select(str_detect("augment"))
data %>%
select(contains("augment"))
data %>%
select(contains("augment")) %>%
colnames()
data %>%
select(lm_augmented) %>%
unnest(lm_augmented) %>%
plot_fit()
knitr::opts_chunk$set(echo = TRUE)
set.seed(12L)
library(tidyverse)
library(broom)
c(1,2,3) %>% map(function(a) a^0.5)
c(1,2,3) %>% map(function(a) {a^0.5})
c(1,2,3) %>% map(sqrt)
tibble(a=c(4,3,5), b=c(8,9,5)) %>%  map(sqrt)
c(1,2,3) %>% map(~sqrt(.))
map2(c(1,3), c(4,8), function(a,b) a*b)
map2(c(1,3), c(4,8), ~(..1)*(..2))
c(1,3) %>% map2(c(4,8), ~(..1)*(..2))
list(list(5, 27, 50), list(1000, 1000, 1000)) %>%
pmap(function(a,b)a*b)
multiply <- function(a, b) {
a * b
}
list(list(5, 27, 50), list(1000, 1000, 1000)) %>%
pmap( ~ multiply(..1, ..2))
data <-  tibble(group = "1",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)) %>%
bind_rows(tibble(
group = "2",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
)) %>%
bind_rows(tibble(
group = "3",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
))
data <- data %>%
group_by(group) %>%
nest() %>%
mutate(
loess = map(data, ~ loess(a ~ b, .)),
lm = map(data, ~ lm(a ~ b, .)),
loess_augmented = map(loess, augment),
lm_augmented = map(loess, augment)
) %>%
ungroup()
plot_fit <- function(data) {
data %>%
ggplot(aes(x = a)) +
geom_point(aes(y = b)) +
geom_line(aes(y = .fitted), color = "blue")
}
data %>%
select(loess_augmented) %>%
unnest(loess_augmented) %>%
plot_fit()
data %>%
select(lm_augmented) %>%
unnest(lm_augmented) %>%
plot_fit()
knitr::opts_chunk$set(echo = TRUE)
set.seed(12L)
library(tidyverse)
library(broom)
c(1,2,3) %>% map(function(a) a^0.5)
c(1,2,3) %>% map(function(a) {a^0.5})
c(1,2,3) %>% map(sqrt)
tibble(a=c(4,3,5), b=c(8,9,5)) %>%  map(sqrt)
c(1,2,3) %>% map(~sqrt(.))
map2(c(1,3), c(4,8), function(a,b) a*b)
map2(c(1,3), c(4,8), ~(..1)*(..2))
c(1,3) %>% map2(c(4,8), ~(..1)*(..2))
list(list(5, 27, 50), list(1000, 1000, 1000)) %>%
pmap(function(a,b)a*b)
multiply <- function(a, b) {
a * b
}
list(list(5, 27, 50), list(1000, 1000, 1000)) %>%
pmap( ~ multiply(..1, ..2))
data <-  tibble(group = "1",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)) %>%
bind_rows(tibble(
group = "2",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
)) %>%
bind_rows(tibble(
group = "3",
a = runif(10, 1, 1000),
b = runif(10, 1, 1000)
))
data <- data %>%
group_by(group) %>%
nest() %>%
mutate(
loess = map(data, ~ loess(a ~ b, .)),
lm = map(data, ~ lm(a ~ b, .)),
loess_augmented = map(loess, augment),
lm_augmented = map(lm, augment)
) %>%
ungroup()
plot_fit <- function(data) {
data %>%
ggplot(aes(x = a)) +
geom_point(aes(y = b)) +
geom_line(aes(y = .fitted), color = "blue")
}
data %>%
select(loess_augmented) %>%
unnest(loess_augmented) %>%
plot_fit()
data %>%
select(lm_augmented) %>%
unnest(lm_augmented) %>%
plot_fit()
